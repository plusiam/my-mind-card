<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ë§Œì˜ ë§ˆìŒ ë¹„ë²• ë§Œë“¤ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ì¶”ê°€ì ì¸ ìŠ¤íƒ€ì¼ë§ */
        .icon-selected {
            transform: scale(1.2);
            color: #FBBF24; /* Tailwind yellow-400 */
        }

        /* V4 ë³€ê²½: ì¸ì‡„ ì „ìš© ìŠ¤íƒ€ì¼ */
        @media print {
            /* í˜ì´ì§€ì˜ ëª¨ë“  ìš”ì†Œë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
            body * {
                visibility: hidden;
            }
            /* ê²°ê³¼ ì¹´ë“œì™€ ê·¸ ì•ˆì˜ ë‚´ìš©ë§Œ ë³´ì´ë„ë¡ ì„¤ì • */
            #resultCard, #resultCard * {
                visibility: visible;
            }
            /* ì¸ì‡„ ì‹œ ê²°ê³¼ ì¹´ë“œê°€ í˜ì´ì§€ ì „ì²´ë¥¼ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
            #resultCard {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 1.5rem;
                border: none !important;
                box-shadow: none !important;
            }
            /* ì¸ì‡„ ì‹œì—ëŠ” 'ì¸ì‡„ ë²„íŠ¼' ìì²´ëŠ” ë³´ì´ì§€ ì•Šë„ë¡ í•¨ */
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-sky-50 flex items-center justify-center min-h-screen p-4 sm:p-6">

    <div class="w-full max-w-3xl mx-auto">
        <div id="mainFormContainer" class="bg-white rounded-2xl shadow-lg p-6 sm:p-10 space-y-8">
            <header class="text-center">
                <h1 class="text-3xl sm:text-4xl font-bold text-sky-800">ë‚˜ë§Œì˜ ë§ˆìŒ ë¹„ë²• ë§Œë“¤ê¸° âœ¨</h1>
                <p class="text-gray-500 mt-2">í˜ë“¤ì—ˆë˜ ë§ˆìŒì„ ë‹¤ë…ì—¬ì£¼ëŠ” ë‚˜ë§Œì˜ ë¹„ë²•ì„ ë§Œë“¤ì–´ ë³´ì•„ìš”!</p>
            </header>

            <form id="mindForm" class="space-y-8">
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 bg-sky-50 p-4 rounded-lg">
                    <div>
                        <label for="schoolName" class="font-semibold text-gray-800">í•™êµ ì´ë¦„</label>
                        <input type="text" id="schoolName" name="schoolName" class="mt-1 w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition" placeholder="ì˜ˆ: ë§ˆìŒì´ˆë“±í•™êµ">
                    </div>
                    <div>
                        <label for="className" class="font-semibold text-gray-800">í•™ë…„/ë°˜</label>
                        <input type="text" id="className" name="className" class="mt-1 w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition" placeholder="ì˜ˆ: 5í•™ë…„ 1ë°˜">
                    </div>
                    <div>
                        <label for="studentName" class="font-semibold text-gray-800">ì´ë¦„</label>
                        <input type="text" id="studentName" name="studentName" class="mt-1 w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition" placeholder="ì˜ˆ: í™ê¸¸ë™">
                    </div>
                </div>
                
                <div>
                    <label for="toughMoment" class="text-xl font-semibold text-gray-800 block mb-2">ğŸ§  1. ë§ˆìŒì´ í˜ë“¤ì—ˆë˜ ìˆœê°„ì€ ì–¸ì œì˜€ë‚˜ìš”?</label>
                    <p class="text-sm text-gray-500 mb-3">(ì˜ˆ: ì¹œêµ¬ë‘ ì‹¸ì› ì„ ë•Œ, ì‹œí—˜ì„ ë§ì³¤ì„ ë•Œ ë“±)</p>
                    <textarea id="toughMoment" name="toughMoment" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition" placeholder="ì—¬ê¸°ì— ì†”ì§í•œ ë§ˆìŒì„ ì ì–´ë³´ì„¸ìš”..."></textarea>
                </div>

                <div>
                    <label class="text-xl font-semibold text-gray-800 block mb-3">ğŸ’¬ 2. ê·¸ë•Œ ë‚˜ëŠ” ì–´ë–¤ ê¸°ë¶„ì´ ë“¤ì—ˆë‚˜ìš”?</label>
                    <div class="flex flex-wrap gap-x-6 gap-y-3">
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="feeling" value="ìŠ¬íì–´" class="text-sky-500 focus:ring-sky-400"><span>ğŸ˜¢ ìŠ¬íì–´</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="feeling" value="í™”ë‚¬ì–´" class="text-sky-500 focus:ring-sky-400"><span>ğŸ˜¡ í™”ë‚¬ì–´</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="feeling" value="ë¶ˆì•ˆí–ˆì–´" class="text-sky-500 focus:ring-sky-400"><span>ğŸ˜¨ ë¶ˆì•ˆí–ˆì–´</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="feeling" value="ì†ìƒí–ˆì–´" class="text-sky-500 focus:ring-sky-400"><span>ğŸ˜ ì†ìƒí–ˆì–´</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer"><input type="radio" name="feeling" value="ì™¸ë¡œì› ì–´" class="text-sky-500 focus:ring-sky-400"><span>ğŸ˜” ì™¸ë¡œì› ì–´</span></label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" name="feeling" value="ê¸°íƒ€" class="text-sky-500 focus:ring-sky-400">
                            <span>ğŸ˜Š ê¸°íƒ€:</span>
                            <input type="text" id="feelingEtc" name="feelingEtc" class="border-b-2 border-gray-300 focus:border-sky-500 outline-none w-24 transition">
                        </label>
                    </div>
                </div>

                <div>
                    <label for="solution" class="text-xl font-semibold text-gray-800 block mb-2">ğŸ’¡ 3. ê·¸ ê¸°ë¶„ì„ ë‹¬ë˜ê¸° ìœ„í•´ ë‚´ê°€ í–ˆë˜ ì¼ ë˜ëŠ” í•˜ê³  ì‹¶ì€ ì¼ì€?</label>
                    <p class="text-sm text-gray-500 mb-3">(ì˜ˆ: ì¢‹ì•„í•˜ëŠ” ë…¸ë˜ ë“£ê¸°, í˜¼ì ìˆê¸°, ê¹Šì€ ìˆ¨ ì‰¬ê¸° ë“±)</p>
                    <textarea id="solution" name="solution" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition" placeholder="ì–´ë–¤ í–‰ë™ì´ ë‚˜ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆë‚˜ìš”?"></textarea>
                </div>

                <div>
                    <label for="secretName" class="text-xl font-semibold text-gray-800 block mb-2">âœ¨ 4. ìœ„ ë°©ë²•ì— ë‚˜ë§Œì˜ â€˜ë¹„ë²• ì´ë¦„â€™ì„ ë¶™ì—¬ë³¼ê¹Œìš”?</label>
                    <p class="text-sm text-gray-500 mb-3">(ì˜ˆ: ê±±ì • ë‚ ë¦¬ê¸° ë°”ëŒ, ê¸°ë¶„ ë°˜ì§ë°˜ì§ ì¶©ì „í•˜ê¸° ë“±)</p>
                    <input type="text" id="secretName" name="secretName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition" placeholder="ë‚˜ë§Œì˜ ë©‹ì§„ ë¹„ë²• ì´ë¦„ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”!">
                </div>
                
                <div>
                    <label class="text-xl font-semibold text-gray-800 block mb-3">ğŸ¨ 5. ë‚´ ë§ˆìŒ ë¹„ë²•ì„ ì•„ì´ì½˜ìœ¼ë¡œ í‘œí˜„í•´ë´ìš”!</label>
                    <div id="iconSelector" class="flex justify-center items-center space-x-4 sm:space-x-8 py-2">
                        <span class="text-4xl sm:text-5xl cursor-pointer transition-transform duration-200 hover:scale-125" data-icon="âœ¨">âœ¨</span>
                        <span class="text-4xl sm:text-5xl cursor-pointer transition-transform duration-200 hover:scale-125" data-icon="ğŸ’–">ğŸ’–</span>
                        <span class="text-4xl sm:text-5xl cursor-pointer transition-transform duration-200 hover:scale-125" data-icon="ğŸ¨">ğŸ¨</span>
                        <span class="text-4xl sm:text-5xl cursor-pointer transition-transform duration-200 hover:scale-125" data-icon="ğŸ’¡">ğŸ’¡</span>
                        <span class="text-4xl sm:text-5xl cursor-pointer transition-transform duration-200 hover:scale-125" data-icon="ğŸ˜Š">ğŸ˜Š</span>
                    </div>
                    <input type="hidden" id="selectedIcon" name="selectedIcon">
                </div>

                <div>
                    <label for="usageTime" class="text-xl font-semibold text-gray-800 block mb-2">ğŸ’– 6. ì´ ë¹„ë²•ì„ ì–¸ì œ ì“°ë©´ ì¢‹ì„ê¹Œìš”?</label>
                    <textarea id="usageTime" name="usageTime" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition" placeholder="ì´ ë¹„ë²•ì´ í•„ìš”í•œ ìˆœê°„ì„ ì ì–´ë³´ì„¸ìš”."></textarea>
                </div>

                <div class="flex flex-col sm:flex-row gap-4 pt-4">
                    <button type="button" id="submitBtn" class="w-full sm:w-2/3 bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-3 px-6 rounded-lg transition-transform duration-200 hover:scale-105 shadow-md">
                        ë‚˜ì˜ ë¹„ë²• ì¹´ë“œ ë§Œë“¤ê¸°!
                    </button>
                    <button type="button" id="resetBtn" class="w-full sm:w-1/3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg transition-transform duration-200 hover:scale-105 shadow-md">
                        ë‹¤ì‹œ ì“¸ë˜ìš”
                    </button>
                </div>
            </form>
        </div>

        <div id="resultCard" class="bg-white rounded-2xl shadow-lg p-6 sm:p-10 mt-10 border-4 border-dashed border-sky-300 hidden">
            <div id="resultContent" class="space-y-6"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('mindForm');
            const submitBtn = document.getElementById('submitBtn');
            const resetBtn = document.getElementById('resetBtn');
            const resultCard = document.getElementById('resultCard');
            const resultContent = document.getElementById('resultContent');
            const iconSelector = document.getElementById('iconSelector');
            const selectedIconInput = document.getElementById('selectedIcon');
            const icons = iconSelector.querySelectorAll('span');

            icons.forEach(icon => {
                icon.addEventListener('click', () => {
                    icons.forEach(i => i.classList.remove('icon-selected'));
                    icon.classList.add('icon-selected');
                    selectedIconInput.value = icon.dataset.icon;
                });
            });

            resetBtn.addEventListener('click', () => {
                form.reset();
                resultCard.classList.add('hidden');
                icons.forEach(i => i.classList.remove('icon-selected'));
                selectedIconInput.value = '';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            submitBtn.addEventListener('click', () => {
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                let feeling = data.feeling;
                if (feeling === 'ê¸°íƒ€' && data.feelingEtc) {
                    feeling = data.feelingEtc;
                } else if (feeling === 'ê¸°íƒ€') {
                    feeling = 'ë‚˜ë§Œì˜ ëŠë‚Œ';
                }

                if (!data.schoolName || !data.className || !data.studentName || !data.toughMoment || !feeling || !data.solution || !data.secretName || !data.selectedIcon || !data.usageTime) {
                    alert('ëª¨ë“  í•­ëª©ì„ ì±„ì›Œì£¼ì„¸ìš”! ğŸ˜Š');
                    return;
                }

                // V4 ë³€ê²½: ê²°ê³¼ ì¹´ë“œ HTMLì— ì¸ì‡„ ë²„íŠ¼ ì¶”ê°€
                resultContent.innerHTML = `
                    <div class="text-right text-base text-gray-600 font-semibold">
                        <p>${data.schoolName} ${data.className} ${data.studentName}</p>
                    </div>
                    <div class="text-center">
                        <span class="text-6xl">${data.selectedIcon || 'ğŸ’Œ'}</span>
                        <h2 class="text-3xl font-bold text-sky-800 mt-2">${data.secretName}</h2>
                        <p class="text-gray-500">${data.studentName} í•™ìƒì˜ ì†Œì¤‘í•œ ë§ˆìŒ ë¹„ë²• ì¹´ë“œ</p>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <h3 class="font-semibold text-lg text-gray-700">ë§ˆìŒì´ í˜ë“¤ì—ˆì„ ë•Œ...</h3>
                            <p class="bg-sky-50 p-3 rounded-lg mt-1">${data.toughMoment}</p>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-gray-700">ê·¸ë•Œ ë‚´ ë§ˆìŒì€...</h3>
                            <p class="bg-sky-50 p-3 rounded-lg mt-1">${feeling}</p>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-gray-700">ë‚˜ë¥¼ ìœ„í•œ í•´ê²°ì±…ì€!</h3>
                            <p class="bg-yellow-50 p-3 rounded-lg mt-1">${data.solution}</p>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-gray-700">ì´ ë¹„ë²•ì€ ì´ëŸ´ ë•Œ í•„ìš”í•´!</h3>
                            <p class="bg-sky-50 p-3 rounded-lg mt-1">${data.usageTime}</p>
                        </div>
                    </div>
                    <div class="text-center mt-8 text-sm text-gray-400">
                        <p>ì´ ì¹´ë“œë¥¼ ì˜ ê°„ì§í•˜ê³ , í•„ìš”í•  ë•Œë§ˆë‹¤ êº¼ë‚´ë³´ì•„ìš”!</p>
                    </div>
                    <div class="mt-8 text-center no-print">
                        <button type="button" id="printBtn" class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-2 px-5 rounded-lg transition-transform duration-200 hover:scale-105 shadow">
                            ğŸ–¨ï¸ ì¸ì‡„ / PDFë¡œ ì €ì¥
                        </button>
                    </div>
                `;

                resultCard.classList.remove('hidden');
                resultCard.scrollIntoView({ behavior: 'smooth', block: 'start' });

                // V4 ë³€ê²½: ë™ì ìœ¼ë¡œ ìƒì„±ëœ ì¸ì‡„ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                const printBtn = document.getElementById('printBtn');
                if (printBtn) {
                    printBtn.addEventListener('click', () => {
                        window.print();
                    });
                }
            });
        });
    </script>

</body>
</html>